---
layout: blog
title: 原型，原型链，构造函数，new以及继承
date: 2022-06-06T20:56:31.290Z
description: 深入探讨原型链和继承
code:
  code: "function "
  lang: javascript
tags:
  - Design
image: https://camo.githubusercontent.com/9a69b0f03116884e80cf566f8542cf014a4dd043fce6ce030d615040461f4e5a/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f6d717971696e6766656e672f426c6f672f496d616765732f70726f746f74797065352e706e67
---
### 1. 原型

每一个JavaScript对象(null除外)在创建的时候就会与之关联另一个对象，这个对象就是我们所说的原型，每一个对象都会从原型"继承"属性。

### 2. 原型链

**原型链的本质是拓展原型搜索机制。**

每个实例对象都有一个私有属性 \_\_proto\_\_（隐式原型）。该属性指向它的构造函数的原型对象 prototype（显式原型）。该原型对象的 \_\_proto\_\_ 也可以指向其他构造函数的 prototype。当试图访问一个对象的属性时，它不仅仅在该对象上搜寻，还会搜寻该对象的原型，以及该对象的原型的原型，依次层层向上搜索，直到找到一个名字匹配的属性或直到一个对象的 \_\_proto\_\_ 指向 null。根据定义，null 没有原型，并作为这个原型链中的最后一个环节。

![](https://camo.githubusercontent.com/9a69b0f03116884e80cf566f8542cf014a4dd043fce6ce030d615040461f4e5a/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f6d717971696e6766656e672f426c6f672f496d616765732f70726f746f74797065352e706e67)

### 3. 原型链继承

```js
function SuperType() {
  this.b = \[1, 2, 3];
}

function SubType() {}

SubType.prototype = new SuperType();
SubType.prototype.constructor = SubType;

var sub1 = new SubType();
var sub2 = new SubType();

// 这里对引用类型的数据进行操作
sub1.b.push(4);

console.log(sub1.b); // \[1,2,3,4]
console.log(sub2.b); // \[1,2,3,4]
console.log(sub1 instanceof SuperType); // true
```

### 1. 构造函数继承

**构造函数**是一种特殊的函数，主要用来初始化对象，即为对象成员变量赋初始值，它总与 new 一起使用。我们可以把对象中一些公共的属性和方法抽取出来，然后封装到这个函数里面。

在 JS 中，使用构造函数时要注意以下两点：

1. 构造函数用于创建某一类对象，其**首字母要大写**
2. 构造函数要**和 new 一起使用**才有意义

**new 在执行时会做四件事情：**

1.   在内存中创建一个新的空对象。
2.   让 this 指向这个新的对象。
3.   执行构造函数里面的代码，给这个新对象添加属性和方法。
4.   返回这个新对象（所以构造函数里面不需要 return ）。

**对象原型（ \_\_ proto \_\_ ）**和**构造函数（prototype）原型对象**里面都有一个属性 **constructor** 属性 ，constructor 我们称为构造函数，因为它指回构造函数本身。constructor 主要用于记录该对象引用于哪个构造函数，它可以让原型对象重新指向原来的构造函数。

[​](http://febook.hzfe.org/awesome-interview/book2/js-inherite#3-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%BB%A7%E6%89%BF "Direct link to heading")

构造函数继承的思想：**子类型构造函数中调用父类的构造函数，使所有需要继承的属性都定义在实例对象上**。

### Reference

JavaScript深入之从原型到原型链  https://github.com/mqyqingfeng/Blog/issues/2